---
vagrant:
  platforms:
    - name: jessie64
      box: debian/jessie64

    - name: trusty64
      box: ubuntu/trusty64

    - name: wily64
      box: ubuntu/wily64

  providers:
    - name: virtualbox
      type: virtualbox
      options:
        # Extra RAM mostly for logserver. Molecule doesn't support
        # per-host memory overrides, although a custom Vagrantfile template
        # would do the trick.
        memory: 1024

  instances:
    - name: logserver
      interfaces:
        - network_name: private_network
          type: static
          ip: "192.168.10.2"
          auto_config: true
      raw_config_args:
        - "vm.network 'forwarded_port', guest: 443, host: 4443"
        - "vm.network 'forwarded_port', guest: 80, host: 8080"
      ansible_groups:
        - logserver
        - riemann

    - name: webserver
      interfaces:
        - network_name: private_network
          type: static
          ip: "192.168.10.3"
          auto_config: true
      ansible_groups:
        - logclients

ansible:
  playbook: playbook.yml
  sudo: no
